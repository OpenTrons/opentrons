Refactoring and adding on top of current update-server, making it usable across OE and buildroot

