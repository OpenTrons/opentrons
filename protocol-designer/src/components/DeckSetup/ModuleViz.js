// @flow
import * as React from 'react'
import { getModuleVizDims } from './getModuleVizDims'
import styles from './ModuleViz.css'
import type { ModuleOnDeck } from '../../step-forms'
import type { ModuleOrientation } from '../../types'

type Props = {|
  x: number,
  y: number,
  orientation: ModuleOrientation,
  module: ModuleOnDeck,
  slotName: string,
|}

// TODO IMMEDIATELY this should come from the deck definition, or something!
// Ideally, we can just get this font???
const slotNumberPaths = {
  '1':
    'M56.192,29.692c-0.828,0-1.5,0.672-1.5,1.5v3.651c0,0.828,0.672,1.5,1.5,1.5h4.16c0.276,0,0.5,0.224,0.5,0.5v15.853c0,0.276-0.223,0.5-0.5,0.5c-0.038,0-0.075-0.004-0.111-0.012l-4.163-0.946c-0.808-0.184-1.612,0.322-1.796,1.13c-0.025,0.109-0.037,0.221-0.037,0.333v3.567c0,0.706,0.492,1.316,1.182,1.466l5.306,1.154c0.489,0.106,0.987,0.159,1.487,0.159h4.9c0.828,0,1.5-0.672,1.5-1.5v0V36.843c0-0.276,0.224-0.5,0.5-0.5h3.268c0.828,0,1.5-0.672,1.5-1.5v-3.651c0-0.828-0.672-1.5-1.5-1.5H56.192z',
  '2':
    'M188.299,29.692h17.713h0c0.828,0,1.5,0.672,1.5,1.5v3.651v0c0,0.828-0.672,1.5-1.5,1.5H195.96c-0.276,0-0.5,0.224-0.5,0.5v0.08c0,1.295,1.428,2.545,4.821,5.313l2.901,2.366c3.482,2.812,4.152,4.419,4.152,8.303c0,6.384-3.482,7.589-9.91,7.589c-2.799,0-6.477-0.305-8.442-0.767c-0.708-0.166-1.194-0.816-1.155-1.542l0.201-3.677c0.044-0.795,0.701-1.418,1.498-1.418c0.088,0,0.176,0.008,0.262,0.023c1.687,0.3,4.047,0.595,5.225,0.595c2.544,0,3.75-0.178,3.75-2.187c0.044-1.652-1.116-2.812-4.062-5.223l-2.723-2.187c-5-4.063-5.178-6.072-5.178-10.312v-2.607C186.799,30.364,187.471,29.692,188.299,29.692z',
  '3':
    'M327.879,29.245c7.276,0,12.41,1.696,12.41,9.687c0,5.216-2.252,7.894-7.698,8.111c-0.157,0.006-0.301,0.085-0.391,0.214c-0.158,0.227-0.102,0.538,0.125,0.696c3.058,2.129,5.114,3.655,6.89,5.262c0.314,0.284,0.494,0.688,0.494,1.112v4.22c0,0.828-0.672,1.5-1.5,1.5h-16.687c-0.828,0-1.5-0.672-1.5-1.5v-3.428c0-0.828,0.672-1.5,1.5-1.5h7.347c0.137,0,0.268-0.057,0.362-0.156c0.19-0.2,0.181-0.517-0.019-0.707c-0.953-0.901-3.261-2.616-6.8-5.055c-0.406-0.28-0.649-0.742-0.649-1.235v-2.418c0-0.828,0.672-1.5,1.5-1.5h0.732c6.116,0,7.902-0.58,7.902-3.125c0-3.169-1.652-3.616-5.268-3.616c-1.169,0-3.183,0.141-4.79,0.355c-0.026,0.003-0.051,0.006-0.077,0.008c-0.826,0.067-1.549-0.548-1.616-1.374l-0.267-3.31c-0.062-0.773,0.474-1.465,1.238-1.598C323.4,29.49,325.902,29.245,327.879,29.245z',
  '4':
    'M72.548,125.549v-3.357c0-0.828-0.672-1.5-1.5-1.5h-4.41c-0.828,0-1.5,0.672-1.5,1.5v3.357c0,0.276-0.224,0.5-0.5,0.5H54.094c-0.828,0-1.5,0.672-1.5,1.5v4.129c0,1.218,0.223,2.427,0.657,3.565l5.662,14.84c0.222,0.581,0.78,0.965,1.402,0.965h4.335c0.828,0,1.5-0.671,1.5-1.5c0-0.199-0.04-0.396-0.116-0.58c-3.975-9.491-5.932-14.562-6.181-15.9c-0.051-0.271,0.128-0.533,0.4-0.583c0.03-0.006,0.061-0.008,0.091-0.008h4.294c0.276,0,0.5,0.224,0.5,0.5v6.482c0,0.828,0.672,1.5,1.5,1.5h4.41c0.828,0,1.5-0.672,1.5-1.5v-6.482c0-0.276,0.224-0.5,0.5-0.5h0.991c0.828,0,1.5-0.672,1.5-1.5v-3.428c0-0.828-0.672-1.5-1.5-1.5h-0.991C72.772,126.049,72.548,125.825,72.548,125.549z',
  '5':
    'M191.04,133.772h-1.958c-0.828,0-1.5,0.672-1.5,1.5c0,0.017,0,0.034,0.001,0.051l0.481,14.276c0.027,0.808,0.69,1.45,1.499,1.45h15.244c0.828,0,1.5-0.672,1.5-1.5l0,0v-3.428c0-0.828-0.672-1.5-1.5-1.5h-8.632c-0.266,0-0.485-0.208-0.499-0.474l-0.208-3.956c-0.015-0.276,0.197-0.511,0.473-0.526c0.008,0,0.016-0.001,0.024-0.001c7.602-0.031,11.1-1.59,11.1-8.571c0-9.151-5.268-10.848-12.767-10.848c-2.045,0-4.508,0.239-6.314,0.546c-0.764,0.13-1.304,0.821-1.244,1.594l0.264,3.437c0.063,0.826,0.785,1.444,1.611,1.381c0.037-0.003,0.073-0.007,0.11-0.013c1.531-0.232,3.543-0.338,4.815-0.338c3.661,0,5.089,0.625,5.089,3.437C198.629,133.325,197.468,133.772,191.04,133.772z',
  '6':
    'M341.048,130.379c0-8.571-4.152-10.133-10.848-10.133c-7.812,0-11.205,2.054-11.205,10c0,6.72,1.021,11.132,8.721,20.269c0.285,0.338,0.705,0.533,1.147,0.533h5.726c0.828,0,1.5-0.672,1.5-1.5c0-0.346-0.119-0.681-0.338-0.948c-1.522-1.866-3.89-4.796-5.903-8.096c-0.144-0.236-0.069-0.543,0.166-0.687c0.078-0.048,0.168-0.073,0.26-0.073c0.025,0,0.05,0.002,0.075,0.006c0.891,0.134,1.625,0.317,2.798,0.317C339.396,140.066,341.048,137.075,341.048,130.379 M329.933,134.887c-2.724,0-3.259-0.625-3.259-4.375c0-3.705,0.848-4.107,3.259-4.107c2.544,0,3.258,0.402,3.258,4.107C333.191,134.307,332.388,134.887,329.933,134.887z',
  // '6-filled':
  //   'M341.048,130.379c0-8.571-4.152-10.133-10.848-10.133c-7.812,0-11.205,2.054-11.205,10c0,6.72,1.021,11.132,8.721,20.269c0.285,0.338,0.705,0.533,1.147,0.533h5.726c0.828,0,1.5-0.672,1.5-1.5c0-0.346-0.119-0.681-0.338-0.948c-1.522-1.866-3.89-4.796-5.903-8.096c-0.144-0.236-0.069-0.543,0.166-0.687c0.078-0.048,0.168-0.073,0.26-0.073c0.025,0,0.05,0.002,0.075,0.006c0.891,0.134,1.625,0.317,2.798,0.317C339.396,140.066,341.048,137.075,341.048,130.379',
  // '6-hole':
  //   'M329.933,134.887c-2.724,0-3.259-0.625-3.259-4.375c0-3.705,0.848-4.107,3.259-4.107c2.544,0,3.258,0.402,3.258,4.107C333.191,134.307,332.388,134.887,329.933,134.887z',
  '7':
    'M74.017,235.738c-2.57-6.341-5.287-9.609-7.183-15.297c-0.915-2.705-1.156-4.772-1.198-7.275c-0.014-0.819-0.681-1.475-1.5-1.475h-5.534c-0.828,0-1.5,0.672-1.5,1.5l0,0v0.196c0,10.461,7.661,17.867,8.146,21.122c0.041,0.273-0.148,0.528-0.421,0.568c-0.025,0.004-0.049,0.005-0.074,0.005h-9.454c-0.828,0-1.5,0.672-1.5,1.5v3.964c0,0.828,0.672,1.5,1.5,1.5H72.7c0.828,0,1.5-0.672,1.5-1.5v-3.871C74.2,236.355,74.138,236.036,74.017,235.738z',
  '8':
    'M196.977,211.245c-6.562,0-11.339,1.562-11.339,8.08c0,3.832,1,6.143,4.714,7.79c0.252,0.112,0.366,0.407,0.254,0.66c-0.049,0.111-0.137,0.2-0.246,0.251c-2.893,1.345-3.963,3.473-3.963,7.013c0,5.803,4.107,7.455,10.58,7.455s10.58-1.652,10.58-7.455c0-3.5-1.1-5.505-4.084-6.844c-0.252-0.113-0.365-0.409-0.251-0.661c0.049-0.108,0.134-0.196,0.242-0.247c3.968-1.884,4.808-4.157,4.808-7.961C208.271,212.808,203.54,211.245,196.977,211.245z M197.022,236.959c-2.5,0-3.259-0.625-3.259-3.169c0-2.098,0.804-3.928,3.169-3.928c2.321,0,3.169,1.83,3.169,3.928C200.102,236.244,199.388,236.959,197.022,236.959z M196.933,224.772c-2.321,0-3.527-1.83-3.527-4.375c0-2.634,0.982-3.08,3.571-3.08c2.589,0,3.616,0.491,3.616,3.08C200.593,222.941,199.299,224.772,196.933,224.772z',
  // '8-filled':
  //   'M196.977,211.245c-6.562,0-11.339,1.562-11.339,8.08c0,3.832,1,6.143,4.714,7.79c0.252,0.112,0.366,0.407,0.254,0.66c-0.049,0.111-0.137,0.2-0.246,0.251c-2.893,1.345-3.963,3.473-3.963,7.013c0,5.803,4.107,7.455,10.58,7.455s10.58-1.652,10.58-7.455c0-3.5-1.1-5.505-4.084-6.844c-0.252-0.113-0.365-0.409-0.251-0.661c0.049-0.108,0.134-0.196,0.242-0.247c3.968-1.884,4.808-4.157,4.808-7.961C208.271,212.808,203.54,211.245,196.977,211.245z',
  // '8-hole-top':
  //   'M197.022,236.959c-2.5,0-3.259-0.625-3.259-3.169c0-2.098,0.804-3.928,3.169-3.928c2.321,0,3.169,1.83,3.169,3.928C200.102,236.244,199.388,236.959,197.022,236.959z',
  // '8-hole-bottom':
  //   'M196.933,224.772c-2.321,0-3.527-1.83-3.527-4.375c0-2.634,0.982-3.08,3.571-3.08c2.589,0,3.616,0.491,3.616,3.08C200.593,222.941,199.299,224.772,196.933,224.772z',
  '9':
    'M332.282,212.225c7.701,9.137,8.721,13.55,8.721,20.269c0,7.946-3.392,10-11.249,10c-6.652,0-10.803-1.563-10.803-10.134c0-6.696,1.607-9.687,7.901-9.687c1.173,0,1.906,0.183,2.797,0.317c0.118,0.018,0.238-0.007,0.339-0.069c0.235-0.146,0.307-0.454,0.161-0.688c-1.965-3.17-4.225-6.18-5.782-8.094c-0.218-0.267-0.336-0.602-0.337-0.946c0-0.828,0.671-1.5,1.5-1.5h5.605C331.577,211.692,331.997,211.887,332.282,212.225z M330.066,236.289c-2.589,0-3.169-0.312-3.169-4.062c0-3.794,0.714-4.33,3.169-4.33c2.679,0,3.259,0.58,3.259,4.33C333.325,235.976,332.477,236.289,330.066,236.289z',
  // '9-filled':
  //   'M332.282,212.225c7.701,9.137,8.721,13.55,8.721,20.269c0,7.946-3.392,10-11.249,10c-6.652,0-10.803-1.563-10.803-10.134c0-6.696,1.607-9.687,7.901-9.687c1.173,0,1.906,0.183,2.797,0.317c0.118,0.018,0.238-0.007,0.339-0.069c0.235-0.146,0.307-0.454,0.161-0.688c-1.965-3.17-4.225-6.18-5.782-8.094c-0.218-0.267-0.336-0.602-0.337-0.946c0-0.828,0.671-1.5,1.5-1.5h5.605C331.577,211.692,331.997,211.887,332.282,212.225z',
  // '9-hole':
  //   'M330.066,236.289c-2.589,0-3.169-0.312-3.169-4.062c0-3.794,0.714-4.33,3.169-4.33c2.679,0,3.259,0.58,3.259,4.33C333.325,235.976,332.477,236.289,330.066,236.289z',
  '10':
    'M61.008,307.843v-3.651c0-0.828-0.672-1.5-1.5-1.5H43.312c-0.828,0-1.5,0.672-1.5,1.5v3.651c0,0.828,0.672,1.5,1.5,1.5h4.161c0.276,0,0.5,0.224,0.5,0.5v15.853c0,0.276-0.223,0.5-0.5,0.5c-0.038,0-0.075-0.004-0.111-0.012l-4.164-0.946c-0.808-0.183-1.611,0.323-1.795,1.131c-0.025,0.109-0.037,0.22-0.037,0.331v3.568c0,0.706,0.492,1.316,1.181,1.466l5.306,1.154c0.489,0.106,0.987,0.159,1.487,0.159h4.9c0.828,0,1.5-0.672,1.5-1.5v-21.704c0-0.276,0.224-0.5,0.5-0.5h3.268C60.337,309.343,61.008,308.672,61.008,307.843z M83.865,304.076c-1.964-1.384-3.527-1.83-7.009-1.83c-3.437,0-4.955,0.447-6.919,1.83c-3.08,2.187-4.152,9.107-4.152,13.794c0,4.731,1.072,11.606,4.152,13.793c1.964,1.384,3.482,1.831,6.919,1.831c3.482,0,5.045-0.447,7.009-1.831c3.08-2.187,4.107-9.062,4.107-13.793C87.972,313.182,86.945,306.263,83.865,304.076z M74.981,309.254c0.492-0.759,0.938-0.893,1.875-0.893c1.027,0,1.518,0.134,1.92,0.893c0.759,1.205,1.205,5.401,1.205,8.616c0,3.258-0.401,7.454-1.205,8.705c-0.446,0.758-0.893,0.848-1.92,0.848c-0.937,0-1.428-0.134-1.875-0.848c-0.714-1.206-1.205-5.447-1.205-8.705C73.776,314.655,74.267,310.414,74.981,309.254z',
  // '10a':
  //   'M61.008,307.843v-3.651c0-0.828-0.672-1.5-1.5-1.5H43.312c-0.828,0-1.5,0.672-1.5,1.5v3.651c0,0.828,0.672,1.5,1.5,1.5h4.161c0.276,0,0.5,0.224,0.5,0.5v15.853c0,0.276-0.223,0.5-0.5,0.5c-0.038,0-0.075-0.004-0.111-0.012l-4.164-0.946c-0.808-0.183-1.611,0.323-1.795,1.131c-0.025,0.109-0.037,0.22-0.037,0.331v3.568c0,0.706,0.492,1.316,1.181,1.466l5.306,1.154c0.489,0.106,0.987,0.159,1.487,0.159h4.9c0.828,0,1.5-0.672,1.5-1.5v-21.704c0-0.276,0.224-0.5,0.5-0.5h3.268C60.337,309.343,61.008,308.672,61.008,307.843z',
  // '10b':
  //   'M83.865,304.076c-1.964-1.384-3.527-1.83-7.009-1.83c-3.437,0-4.955,0.447-6.919,1.83c-3.08,2.187-4.152,9.107-4.152,13.794c0,4.731,1.072,11.606,4.152,13.793c1.964,1.384,3.482,1.831,6.919,1.831c3.482,0,5.045-0.447,7.009-1.831c3.08-2.187,4.107-9.062,4.107-13.793C87.972,313.182,86.945,306.263,83.865,304.076z',
  // '10b-hole':
  //   'M74.981,309.254c0.492-0.759,0.938-0.893,1.875-0.893c1.027,0,1.518,0.134,1.92,0.893c0.759,1.205,1.205,5.401,1.205,8.616c0,3.258-0.401,7.454-1.205,8.705c-0.446,0.758-0.893,0.848-1.92,0.848c-0.937,0-1.428-0.134-1.875-0.848c-0.714-1.206-1.205-5.447-1.205-8.705C73.776,314.655,74.267,310.414,74.981,309.254z',
  '11':
    'M189.24,309.343h3.268c0.828,0,1.5-0.672,1.5-1.5v-3.651c0-0.828-0.672-1.5-1.5-1.5h-16.196c-0.828,0-1.5,0.672-1.5,1.5v3.651c0,0.828,0.672,1.5,1.5,1.5h4.161c0.276,0,0.5,0.224,0.5,0.5v15.853c0,0.276-0.223,0.5-0.5,0.5c-0.037,0-0.075-0.004-0.111-0.012l-4.164-0.946c-0.808-0.184-1.612,0.322-1.795,1.13c-0.025,0.109-0.037,0.22-0.037,0.332v3.568c0,0.706,0.492,1.316,1.181,1.466l5.305,1.154c0.489,0.106,0.987,0.159,1.487,0.159h4.9c0.828,0,1.5-0.672,1.5-1.5v-21.704C188.74,309.567,188.964,309.343,189.24,309.343 M219.767,307.843v-3.651c0-0.828-0.672-1.5-1.5-1.5h-16.195c-0.828,0-1.5,0.672-1.5,1.5v3.651c0,0.828,0.672,1.5,1.5,1.5h4.16c0.276,0,0.5,0.224,0.5,0.5v15.853c0,0.276-0.223,0.5-0.5,0.5c-0.037,0-0.075-0.004-0.111-0.012l-4.163-0.946c-0.808-0.184-1.612,0.322-1.795,1.13c-0.025,0.109-0.037,0.22-0.037,0.332v3.568c0,0.706,0.492,1.316,1.181,1.466l5.305,1.154c0.489,0.106,0.987,0.159,1.487,0.159h4.901c0.828,0,1.5-0.672,1.5-1.5v-21.704c0-0.276,0.224-0.5,0.5-0.5h3.267C219.095,309.343,219.767,308.672,219.767,307.843z',
  // '11a':
  //   'M189.24,309.343h3.268c0.828,0,1.5-0.672,1.5-1.5v-3.651c0-0.828-0.672-1.5-1.5-1.5h-16.196c-0.828,0-1.5,0.672-1.5,1.5v3.651c0,0.828,0.672,1.5,1.5,1.5h4.161c0.276,0,0.5,0.224,0.5,0.5v15.853c0,0.276-0.223,0.5-0.5,0.5c-0.037,0-0.075-0.004-0.111-0.012l-4.164-0.946c-0.808-0.184-1.612,0.322-1.795,1.13c-0.025,0.109-0.037,0.22-0.037,0.332v3.568c0,0.706,0.492,1.316,1.181,1.466l5.305,1.154c0.489,0.106,0.987,0.159,1.487,0.159h4.9c0.828,0,1.5-0.672,1.5-1.5v-21.704C188.74,309.567,188.964,309.343,189.24,309.343',
  // '11b':
  //   'M219.767,307.843v-3.651c0-0.828-0.672-1.5-1.5-1.5h-16.195c-0.828,0-1.5,0.672-1.5,1.5v3.651c0,0.828,0.672,1.5,1.5,1.5h4.16c0.276,0,0.5,0.224,0.5,0.5v15.853c0,0.276-0.223,0.5-0.5,0.5c-0.037,0-0.075-0.004-0.111-0.012l-4.163-0.946c-0.808-0.184-1.612,0.322-1.795,1.13c-0.025,0.109-0.037,0.22-0.037,0.332v3.568c0,0.706,0.492,1.316,1.181,1.466l5.305,1.154c0.489,0.106,0.987,0.159,1.487,0.159h4.901c0.828,0,1.5-0.672,1.5-1.5v-21.704c0-0.276,0.224-0.5,0.5-0.5h3.267C219.095,309.343,219.767,308.672,219.767,307.843z',
  //
  // TODO IMMEDIATELY: this is a placeholder. Should say 'TC'
  span7_8_10_11:
    'm 40 300 l 20 0 l 0 5 l -8 0 l 0 15 l -6 0 l 0 -15 l 0 0 l -6 0 m 0 -5',
}

const ModuleViz = (props: Props) => {
  const moduleType = props.module.type
  const {
    xOffset,
    yOffset,
    xDimension,
    yDimension,
    childXOffset,
    childYOffset,
    childXDimension,
    childYDimension,
  } = getModuleVizDims(props.orientation, moduleType)

  return (
    <g>
      <rect
        x={props.x + xOffset}
        y={props.y + yOffset}
        height={yDimension}
        width={xDimension}
        className={styles.module_viz}
      />
      <rect
        x={props.x + childXOffset}
        y={props.y + childYOffset}
        height={childYDimension}
        width={childXDimension}
        className={styles.module_slot_area}
      />

      <path
        className={styles.module_slot_text}
        d={slotNumberPaths[props.slotName]}
      />
      {/* <text
        x={props.x + childXOffset + childXDimension / 2}
        y={props.y + childYOffset + childYDimension / 2}
        className={styles.module_slot_text}
      >
        {props.slotName}
      </text> */}
    </g>
  )
}

export default ModuleViz
