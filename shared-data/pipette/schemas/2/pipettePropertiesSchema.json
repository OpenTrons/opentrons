{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"$id": "opentronsPipetteGeometrySchemaV2",
	"definitions": {
	"channels": {
		"enum": [1, 8, 96]
		},
	  "positiveNumber": {
		"type": "number",
		"minimum": 0
	  },
	  "currentRange": {
		"type": "number",
		"minimum": 0.01,
		"maximum": 2.5
	  },
	  "xyzArray": {
		"type": "array",
		"description": "Array of 3 numbers, [x, y, z]",
		"items": { "type": "number" },
		"minItems": 3,
		"maxItems": 3
	  },
	  "linearEquations": {
		"description": "Array containing any number of 3-arrays. Each inner 3-array describes a line segment: [boundary, slope, intercept]. So [1, 2, 3] would mean 'where (next_boundary > x >= 1), y = 2x + 3'",
		"type": "array",
		"items": {
		  "type": "array",
		  "items": { "type": "number" },
		  "minItems": 3,
		  "maxItems": 3
		}
	  },
	  "liquidHandlingSpecs": {
		"description": "Object containing linear equations for translating between uL of liquid and mm of plunger travel. There is one linear equation for aspiration and one for dispense",
		"type": "object",
		"required": ["aspirate", "dispense"],
		"additionalProperties": false,
		"properties": {
		  "aspirate": { "$ref": "#/definitions/linearEquations" },
		  "dispense": { "$ref": "#/definitions/linearEquations" }
		}
	  },
	  "editConfigurations": {
		"type": "object",
		"description": "Object allowing you to modify a config",
		"required": ["value"],
		"properties": {
		  "value": { "type": ["number", "array"] },
		  "min": { "type": "number" },
		  "max": { "type": "number" },
		  "units": { "type": "string" },
		  "type": { "type": "string" },
		  "displayName": { "type": "string" }
		}
	  },
	  "tipConfigurations": {
		"type": "object",
		"description": "Object containing configurations specific to tip handling",
		"required": ["current", "speed"],
		"properties": {
			"current": { "$ref": "#/definitions/currentRange" },
			"presses": {},
			"speed": { "$ref": "#/definitions/editConfigurations"},
			"increment": {}

		}
	  }
	},
	"description": "Version-level pipette specifications, which may vary across different versions of the same pipette",
	"type": "object",
	"$comment": "Example key: 'p10_single_v1.3'",
	"required": [
		"name",
		"top",
		"bottom",
		"blowout",
		"dropTip",
		"modelOffset",
		"plungerCurrent",
		"dropTipCurrent",
		"dropTipSpeed",
		"ulPerMm",
		"tipLength",
		"nozzleOffset",
		"pickUpTipConfigurations",
		"dropTipConfigurations",
		"partialTipConfigurations"
		],
		"properties": {
			"additionalProperties": false,
			"properties": {
			  "name": {
				"description": "reference to name of this version, should match a key in corresponding pipetteNameSpecs.json file",
				"type": "string"
			  },
			  "backCompatNames": {
				"description": "Optional reference for name of backwards compatible pipette corresponding to a key in pipetteNameSpecs.json, only relevant to gen2 pipettes",
				"type": "array"
			  },

			  "pickUpCurrent": { "$ref": "#/definitions/editConfigurations" },
			  "pickUpDistance": { "$ref": "#/definitions/editConfigurations" },
			  "pickUpPresses": { "$ref": "#/definitions/editConfigurations" },
			  "pickUpIncrement": { "$ref": "#/definitions/editConfigurations" },
			  "pickUpSpeed": { "$ref": "#/definitions/editConfigurations" },
			  "modelOffset": { "$ref": "#/definitions/xyzArray" },
			  "nozzleOffset": { "$ref": "#/definitions/xyzArray" },
			  "plungerCurrent": { "$ref": "#/definitions/editConfigurations" },
			  "dropTipCurrent": { "$ref": "#/definitions/editConfigurations" },
			  "dropTipSpeed": { "$ref": "#/definitions/editConfigurations" },
			  "channels": { "$ref": "#/definitions/channels" },
			  "partialTipConfigurations": {},
			  "availableSensors": {},
			  "motorConfigurations": {
				"$ref": "#/definitions/motorConfigurations"
			  },
			  "pickUpTipConfigurations" : {
				"$ref": "#/definitions/tipConfigurations"
			  },
			  "dropTipConfigurations" : {
				"$ref": "#/definitions/tipConfigurations"
			  },
			  "ulPerMm": {
				"type": "array",
				"items": { "$ref": "#/definitions/liquidHandlingSpecs" }
			  },
			  "idleCurrent": { "$ref": "#/definitions/idleCurrentRange" },
			  "volumeRange": {},
			  "version": { "$ref": "#/definitions/version"}
		  }
		}
  }
  