{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "coordinates": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "x",
        "y",
        "z"
      ],
      "properties": {
        "x": {
          "type": "number"
        },
        "y": {
          "type": "number"
        },
        "z": {
          "type": "number"
        }
      }
    },
    "positiveNumber": {
      "type": "number",
      "minimum": 0
    },
    "polynomialTerm": {
      "type": "array",
      "description": "Array representing a polynomial term. The first element (a non-negative integer) describes the degree of the variable, and the second the coefficient.",
      "items": [
        {
          "type": "integer",
          "minimum": 0
        },
        {
          "type": "number"
        }
      ],
      "minItems": 2,
      "maxItems": 2
    }
  },
  "description": "Gripper specification",
  "type": "object",
  "required": [
    "$otSharedSchema",
    "displayName",
    "model",
    "zMotorConfigurations",
    "jawMotorConfigurations",
    "gripForceProfile",
    "geometry"
  ],
  "additionalProperties": false,
  "properties": {
    "$otSharedSchema": {
      "type": "string",
      "description": "The path to a valid Opentrons shared schema relative to the shared-data directory, without its extension. For instance, #/gripper/schemas/1 is a reference to this schema."
    },
    "displayName": {
      "type": "string"
    },
    "model": {
      "type": "string",
      "pattern": "^gripperV[0-9]$"
    },
    "gripForceProfile": {
      "type": "object",
      "description": "Grip force (in N) configurations.",
      "properties": {
        "polynomial": {
          "type": "array",
          "description": "Polynomial function to convert a grip force in Newton to the jaw motor duty cycle value, which will be read by the gripper firmware.",
          "items": {
            "$ref": "#/definitions/polynomialTerm"
          },
          "minItems": 1
        },
        "defaultGripForce": {
          "$ref": "#/definitions/positiveNumber"
        },
        "defaultHomeForce": {
          "$ref": "#/definitions/positiveNumber"
        },
        "minForce": {
          "$ref": "#/definitions/positiveNumber"
        },
        "maxForce": {
          "$ref": "#/definitions/positiveNumber"
        }
      }
    },
    "zMotorConfigurations": {
      "type": "object",
      "description": "Object containing configurations specific to the z motor.",
      "properties": {
        "idle": {
          "descriptions": "Motor idle current (A)",
          "type": "number",
          "minimum": 0.02,
          "maximum": 1.0
        },
        "run": {
          "descriptions": "Motor active current (A)",
          "type": "number",
          "minimum": 0.67,
          "maximum": 2.5
        }
      },
      "required": [
        "idle",
        "run"
      ]
    },
    "jawMotorConfigurations": {
      "type": "object",
      "description": "Object containing configurations specific to the jaw motor.",
      "properties": {
        "vref": {
          "descriptions": "Reference voltage (V)",
          "type": "number",
          "minimum": 0.5,
          "maximum": 2.5
        }
      },
      "required": [
        "vref"
      ]
    },
    "geometry": {
      "type": "object",
      "properties": {
        "baseOffsetFromMount": {
          "$ref": "#/definitions/coordinates"
        },
        "jawCenterOffsetFromBase": {
          "$ref": "#/definitions/coordinates"
        },
        "pinOneOffsetFromBase": {
          "$ref": "#/definitions/coordinates"
        },
        "pinTwoOffsetFromBase": {
          "$ref": "#/definitions/coordinates"
        },
        "jawWidth": {
          "type": "object",
          "description": "The widths of gripper jaw when it is fully closed (min) and fully open (max).",
          "properties": {
            "min": {
              "$ref": "#/definitions/positiveNumber"
            },
            "max": {
              "$ref": "#/definitions/positiveNumber"
            }
          },
          "required": [
            "min",
            "max"
          ]
        }
      },
      "required": [
        "baseOffsetFromMount",
        "jawCenterOffsetFromBase",
        "pinOneOffsetFromBase",
        "pinTwoOffsetFromBase",
        "jawWidth"
      ]
    }
  }
}